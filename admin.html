<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®é”å…§éƒ¨ - å®¢æˆ¶éˆæ¥ç¸½æ§å°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body { background-color: #f0f2f5; font-family: "Microsoft JhengHei", sans-serif; padding-bottom: 50px; }
        .header { background: #212529; color: #ffc107; padding: 15px; text-align: center; font-weight: bold; font-size: 1.2rem; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .nav-pills .nav-link { color: #555; font-weight: bold; background: white; margin: 0 5px; border: 1px solid #ddd; border-radius: 20px; }
        .nav-pills .nav-link.active { background-color: #ffc107; color: black; border-color: #ffc107; }
        .nav-scroll { overflow-x: auto; white-space: nowrap; padding-bottom: 10px; -webkit-overflow-scrolling: touch; }
        
        .client-card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; border-left: 5px solid #ddd; }
        .client-info { flex: 1; }
        .c-name { font-size: 1.1rem; font-weight: bold; color: #333; margin-bottom: 2px; }
        .c-code { font-size: 0.85rem; color: #888; font-family: monospace; }
        .btn-action { width: 42px; height: 42px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; margin-left: 8px; transition: transform 0.1s; text-decoration: none; }
        .btn-action:active { transform: scale(0.9); }
        .btn-whatsapp { background-color: #25D366; color: white; }
        .btn-link { background-color: #0d6efd; color: white; }
        .sales-badge { font-size: 0.75rem; background: #eee; padding: 2px 6px; border-radius: 4px; color: #555; margin-left: 5px; }
    </style>
</head>
<body>

<div class="header">
    <i class="bi bi-diagram-3-fill"></i> å®é”å®¢æˆ¶éˆæ¥åˆ†ç™¼ä¸­å¿ƒ
</div>

<div class="container">
    <div class="nav-scroll">
        <ul class="nav nav-pills justify-content-center mb-3" id="salesTabs">
            <li class="nav-item"><button class="nav-link active" onclick="filterSales('A')">å¿—å“¥ (A)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('E')">äºŒä½¬ (E)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('B')">åšå£« (B)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('C')">å«¦å§ (C)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('D')">David (D)</button></li>
        </ul>
    </div>

    <div id="clientListArea"></div>
</div>

<script src="customers.js"></script>
<script>
    // åŸºç¤ç¶²å€ (è«‹ç¢ºä¿é€™å€‹ç¶²å€æ˜¯æ­£ç¢ºçš„)
    const baseUrl = "https://hkwangtat-order.github.io/new-clients/index.html";

    function init() {
        filterSales('A'); // é»˜èªé¡¯ç¤ºå¿—å“¥
    }

    function filterSales(salesCode) {
        // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
        document.querySelectorAll('.nav-link').forEach(btn => {
            btn.classList.remove('active');
            if(btn.innerText.includes(`(${salesCode})`)) btn.classList.add('active');
        });

        const container = document.getElementById('clientListArea');
        container.innerHTML = ''; // æ¸…ç©º

        // éæ­·æ‰€æœ‰å®¢æˆ¶
        let found = false;
        for (const [id, data] of Object.entries(clientDB)) {
            if (data.sales === salesCode) {
                found = true;
                const link = `${baseUrl}?id=${id}`;
                
                // ç”Ÿæˆ WhatsApp é è¨­æ–‡å­—
                // é€™è£¡è§£æ±ºäº†ã€Œå°ˆå±¬æ„Ÿã€çš„å•é¡Œ ğŸ‘‡
                const msg = `ä½ å¥½ ${data.name}ï¼Œé€™æ˜¯å®é”ç‚ºæ‚¨æº–å‚™çš„å°ˆå±¬é›»å­è½å–®éˆæ¥ï¼Œè«‹ä¿å­˜ï¼š\n${link}`;
                const waLink = `https://api.whatsapp.com/send?text=${encodeURIComponent(msg)}`;

                const html = `
                    <div class="client-card" style="border-left-color: ${getColor(salesCode)}">
                        <div class="client-info">
                            <div class="c-name">${data.name}</div>
                            <div class="c-code">${id} <span class="sales-badge">Sales: ${salesCode}</span></div>
                        </div>
                        <div style="display:flex">
                            <a href="${link}" target="_blank" class="btn-action btn-link" title="ç›´æ¥æ‰“é–‹æª¢æŸ¥">
                                <i class="bi bi-box-arrow-up-right"></i>
                            </a>
                            <a href="${waLink}" target="_blank" class="btn-action btn-whatsapp" title="ç™¼é€çµ¦å®¢æˆ¶">
                                <i class="bi bi-whatsapp"></i>
                            </a>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            }
        }

        if (!found) {
            container.innerHTML = '<div class="text-center text-muted mt-5">æš«ç„¡æ­¤éŠ·å”®çš„å®¢æˆ¶è³‡æ–™</div>';
        }
    }

    function getColor(code) {
        // çµ¦æ¯å€‹éŠ·å”®ä¸€é»é¡è‰²å€åˆ†
        const colors = { 'A': '#0d6efd', 'E': '#198754', 'B': '#dc3545', 'C': '#ffc107', 'D': '#6f42c1' };
        return colors[code] || '#ccc';
    }

    init();
</script>

</body>
</html>