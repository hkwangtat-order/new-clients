<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®é”å…§éƒ¨ - å®¢æˆ¶éˆæ¥ç¸½æ§å°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    
    <style>
        body { background-color: #f0f2f5; font-family: "Microsoft JhengHei", sans-serif; padding-bottom: 50px; }
        .header { background: #212529; color: #ffc107; padding: 15px; text-align: center; font-weight: bold; font-size: 1.2rem; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
        .nav-pills .nav-link { color: #555; font-weight: bold; background: white; margin: 0 5px; border: 1px solid #ddd; border-radius: 20px; }
        .nav-pills .nav-link.active { background-color: #ffc107; color: black; border-color: #ffc107; }
        .nav-scroll { overflow-x: auto; white-space: nowrap; padding-bottom: 10px; -webkit-overflow-scrolling: touch; }
        
        /* å¡ç‰‡æ¨£å¼ */
        .client-card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; border-left: 5px solid #ddd; gap: 10px; }
        
        .client-info { flex: 1; }
        .c-name { font-size: 1.1rem; font-weight: bold; color: #333; margin-bottom: 4px; }
        .c-code { font-size: 0.85rem; color: #888; font-family: monospace; }
        
        /* æŒ‰éˆ•å®¹å™¨ */
        .btn-group-custom { display: flex; gap: 10px; }
        
        /* å¼·åˆ¶æŒ‰éˆ•æ–‡å­—ä¸æ›è¡Œ */
        .btn { white-space: nowrap; font-weight: bold; display: flex; align-items: center; gap: 5px; }

        /* æ‰‹æ©Ÿé©é…ï¼šå±å¹•å¾ˆå°æ™‚ï¼Œåå­—å­—é«”è®Šå°ï¼Œç¢ºä¿æŒ‰éˆ•ä¸æ‰ä¸‹ä¾† */
        @media (max-width: 400px) {
            .client-card { flex-direction: column; align-items: flex-start; }
            .btn-group-custom { width: 100%; margin-top: 10px; }
            .btn { flex: 1; justify-content: center; }
        }
    </style>
</head>
<body>

<div class="header">
    ğŸ¯ å®é”å®¢æˆ¶éˆæ¥åˆ†ç™¼ä¸­å¿ƒ
</div>

<div class="container">
    <div class="nav-scroll">
        <ul class="nav nav-pills justify-content-center mb-3" id="salesTabs">
            <li class="nav-item"><button class="nav-link active" onclick="filterSales('A')">å¿—å“¥ (A)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('E')">äºŒä½¬ (E)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('B')">åšå£« (B)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('C')">å«¦å§ (C)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('D')">David (D)</button></li>
        </ul>
    </div>

    <div id="clientListArea"></div>
</div>

<script src="customers.js"></script>
<script>
    // åŸºç¤ç¶²å€
    const baseUrl = "https://hkwangtat-order.github.io/new-clients/index.html";

    function init() {
        filterSales('A'); // é»˜èªé¡¯ç¤ºå¿—å“¥
    }

    function filterSales(salesCode) {
        // 1. æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
        document.querySelectorAll('.nav-link').forEach(btn => {
            btn.classList.remove('active');
            if(btn.innerText.includes(`(${salesCode})`)) btn.classList.add('active');
        });

        const container = document.getElementById('clientListArea');
        container.innerHTML = ''; 

        // 2. ç²å–ä¸¦å€’åºæ’åˆ— (æœ€æ–°çš„åœ¨æœ€ä¸Šé¢)
        let clientArray = Object.entries(clientDB).reverse();

        let found = false;
        let html = '';

        for (const [id, data] of clientArray) {
            if (data.sales === salesCode) {
                found = true;
                
                const link = `${baseUrl}?id=${id}`;
                // WhatsApp é è¨­æ–‡å­—
                const msg = `ä½ å¥½ ${data.name}ï¼Œé€™æ˜¯å®é”ç‚ºæ‚¨æº–å‚™çš„å°ˆå±¬é›»å­è½å–®éˆæ¥ï¼Œè«‹ä¿å­˜ï¼š\n${link}`;
                const waLink = `https://api.whatsapp.com/send?text=${encodeURIComponent(msg)}`;

                html += `
                    <div class="client-card" style="border-left-color: ${getColor(salesCode)}">
                        <div class="client-info">
                            <div class="c-name">${data.name}</div>
                            <div class="c-code">${id}</div>
                        </div>
                        
                        <div class="btn-group-custom">
                            <a href="${link}" target="_blank" class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-search"></i> æª¢æŸ¥
                            </a>
                            <a href="${waLink}" target="_blank" class="btn btn-sm btn-success">
                                <i class="bi bi-whatsapp"></i> WhatsApp è½‰ç™¼
                            </a>
                        </div>
                    </div>
                `;
            }
        }

        if (!found) {
            container.innerHTML = '<div class="text-center text-muted mt-5">æš«ç„¡æ­¤éŠ·å”®çš„å®¢æˆ¶è³‡æ–™</div>';
        } else {
            container.innerHTML = html;
        }
    }

    function getColor(code) {
        const colors = { 'A': '#0d6efd', 'E': '#198754', 'B': '#dc3545', 'C': '#ffc107', 'D': '#6f42c1' };
        return colors[code] || '#ccc';
    }

    init();
</script>

</body>
</html>
