<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®é”å…§éƒ¨ - å®¢æˆ¶éˆæ¥ç¸½æ§å°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    
    <style>
        body { background-color: #f0f2f5; font-family: "Microsoft JhengHei", sans-serif; padding-bottom: 50px; }
        .header { background: #212529; color: #ffc107; padding: 12px; text-align: center; font-weight: bold; font-size: 1.1rem; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
        .nav-pills .nav-link { color: #555; font-weight: bold; background: white; margin: 0 4px; border: 1px solid #ddd; border-radius: 20px; font-size: 0.9rem; padding: 6px 12px; }
        .nav-pills .nav-link.active { background-color: #ffc107; color: black; border-color: #ffc107; }
        .nav-scroll { overflow-x: auto; white-space: nowrap; padding-bottom: 10px; -webkit-overflow-scrolling: touch; }
        
        /* === å¡ç‰‡æ¨£å¼ (å¼·åˆ¶å–®è¡Œ) === */
        .client-card { 
            background: white; 
            border-radius: 8px; /* åœ“è§’ç¨å¾®æ”¹å°ï¼Œæ›´ä¹¾æ·¨ */
            padding: 10px 12px; /* æ¸›å°‘å…§é‚Šè·ï¼Œæ›´ç·Šæ¹Š */
            margin-bottom: 10px; /* æ¸›å°‘å¡ç‰‡é–“è· */
            box-shadow: 0 1px 3px rgba(0,0,0,0.05); 
            display: flex; 
            flex-direction: row; /* å¼·åˆ¶æ©«å‘æ’åˆ— */
            justify-content: space-between; 
            align-items: center; 
            border-left: 4px solid #ddd; 
            gap: 8px; 
        }
        
        /* === å·¦å´ä¿¡æ¯ (è‡ªå‹•æˆªæ–·) === */
        .client-info { 
            flex: 1; 
            min-width: 0; /* é—œéµï¼šå…è¨± flex å­å…ƒç´ ç¸®å°ï¼Œé˜²æ­¢æ’é–‹ */
            margin-right: 5px;
        }
        .c-name { 
            font-size: 1rem; 
            font-weight: bold; 
            color: #333; 
            white-space: nowrap; /* ä¸æ›è¡Œ */
            overflow: hidden; 
            text-overflow: ellipsis; /* è¶…å‡ºé¡¯ç¤º ... */
            margin-bottom: 0;
            line-height: 1.2;
        }
        .c-code { 
            font-size: 0.75rem; 
            color: #999; 
            font-family: monospace; 
            margin-top: 2px;
        }
        
        /* === å³å´æŒ‰éˆ•çµ„ === */
        .btn-group-custom { 
            display: flex; 
            gap: 6px; 
            flex-shrink: 0; /* é˜²æ­¢æŒ‰éˆ•è¢«æ“ å£“è®Šå½¢ */
        }
        
        /* === æŒ‰éˆ•æ¨£å¼ (ç·Šæ¹Šå‹) === */
        .btn-action { 
            border: none;
            color: white;
            font-weight: bold;
            font-size: 0.85rem; /* å­—é«”ç¨å° */
            padding: 6px 10px; /* å…§é‚Šè·ç¸®å° */
            border-radius: 5px;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            white-space: nowrap;
            transition: opacity 0.2s;
        }
        .btn-action:hover { color: white; opacity: 0.9; }
        .btn-action:active { transform: scale(0.96); }

        .btn-blue { background-color: #0d6efd; }
        .btn-green { background-color: #198754; }
        
    </style>
</head>
<body>

<div class="header">
    ğŸ¯ å®é”å®¢æˆ¶éˆæ¥åˆ†ç™¼ä¸­å¿ƒ
</div>

<div class="container">
    <div class="nav-scroll">
        <ul class="nav nav-pills justify-content-center mb-3" id="salesTabs">
            <li class="nav-item"><button class="nav-link active" onclick="filterSales('A')">å¿—å“¥ (A)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('E')">äºŒä½¬ (E)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('B')">åšå£« (B)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('C')">å«¦å§ (C)</button></li>
            <li class="nav-item"><button class="nav-link" onclick="filterSales('D')">David (D)</button></li>
        </ul>
    </div>

    <div id="clientListArea"></div>
</div>

<script src="customers.js"></script>
<script>
    const baseUrl = "https://hkwangtat-order.github.io/new-clients/index.html";

    function init() {
        filterSales('A'); 
    }

    function filterSales(salesCode) {
        document.querySelectorAll('.nav-link').forEach(btn => {
            btn.classList.remove('active');
            if(btn.innerText.includes(`(${salesCode})`)) btn.classList.add('active');
        });

        const container = document.getElementById('clientListArea');
        container.innerHTML = ''; 

        // å€’åºæ’åˆ—
        let clientArray = Object.entries(clientDB).reverse();

        let found = false;
        let html = '';

        for (const [id, data] of clientArray) {
            if (data.sales === salesCode) {
                found = true;
                
                const link = `${baseUrl}?id=${id}`;
                const msg = `ä½ å¥½ ${data.name}ï¼Œé€™æ˜¯å®é”ç‚ºæ‚¨æº–å‚™çš„å°ˆå±¬é›»å­è½å–®éˆæ¥ï¼Œè«‹ä¿å­˜ï¼š\n${link}`;
                const waLink = `https://api.whatsapp.com/send?text=${encodeURIComponent(msg)}`;

                html += `
                    <div class="client-card" style="border-left-color: ${getColor(salesCode)}">
                        <div class="client-info">
                            <div class="c-name">${data.name}</div>
                            <div class="c-code">${id}</div>
                        </div>
                        
                        <div class="btn-group-custom">
                            <a href="${link}" target="_blank" class="btn-action btn-blue">
                                <i class="bi bi-search"></i> æª¢æŸ¥
                            </a>
                            <a href="${waLink}" target="_blank" class="btn-action btn-green">
                                <i class="bi bi-whatsapp"></i> è½‰ç™¼
                            </a>
                        </div>
                    </div>
                `;
            }
        }

        if (!found) {
            container.innerHTML = '<div class="text-center text-muted mt-5">æš«ç„¡æ­¤éŠ·å”®çš„å®¢æˆ¶è³‡æ–™</div>';
        } else {
            container.innerHTML = html;
        }
    }

    function getColor(code) {
        const colors = { 'A': '#0d6efd', 'E': '#198754', 'B': '#dc3545', 'C': '#ffc107', 'D': '#6f42c1' };
        return colors[code] || '#ccc';
    }

    init();
</script>

</body>
</html>
